"undefined" == typeof jQuery && alert("Hashgrid: jQuery not loaded. Make sure it's linked to your pages.");

var hashgrid = function(a) {
    function b(a) {
        if (null == z.modifierKey) return !0;
        var b = !0;
        switch (z.modifierKey) {
          case "ctrl":
            b = a.ctrlKey ? a.ctrlKey : !1;
            break;

          case "alt":
            b = a.altKey ? a.altKey : !1;
            break;

          case "shift":
            b = a.shiftKey ? a.shiftKey : !1;
        }
        return b;
    }
    function c(a) {
        var b = !1, c = a.keyCode ? a.keyCode : a.which;
        return b = 13 == c ? "enter" : String.fromCharCode(c).toLowerCase();
    }
    function d() {
        h(z.cookiePrefix + z.id, (F ? "1" : "0") + "-" + C + "-" + A, 1);
    }
    function e() {
        r.show(), u.css({
            width: r.width()
        }), u.children(".vert").each(function() {
            var a = $(this);
            a.css("display", "inline-block"), a.offset().top > a.parent().offset().top && a.hide();
        });
    }
    function f(a) {
        var f, g, h = a.target.tagName.toLowerCase();
        if ("input" == h || "textarea" == h || "select" == h) return !0;
        if (g = b(a), !g) return !0;
        if (f = c(a), !f) return !0;
        if (k[f]) return !0;
        switch (k[f] = !0, f) {
          case z.showGridKey:
            B ? F && (r.hide(), B = !1, F = !1, d()) : (e(), B = !0);
            break;

          case z.holdGridKey:
            B && !F && (F = !0, d());
            break;

          case z.foregroundKey:
            B && (r.css("z-index") == E ? (r.css("z-index", D), C = "B") : (r.css("z-index", E), 
            C = "F"), d());
            break;

          case z.jumpGridsKey:
            B && z.numberOfGrids > 1 && (r.removeClass(z.classPrefix + A), A++, A > z.numberOfGrids && (A = 1), 
            r.addClass(z.classPrefix + A), e(), /webkit/.test(navigator.userAgent.toLowerCase()) && j(), 
            d());
        }
        return !0;
    }
    function g(a) {
        var d, e = b(a);
        return e ? (d = c(a), k[d] = !1, d && d == z.showGridKey && !F && (r.hide(), B = !1), 
        !0) : !0;
    }
    function h(a, b, c) {
        var d, e = "";
        c && (d = new Date(), d.setTime(d.getTime() + 24 * c * 60 * 60 * 1e3), e = "; expires=" + d.toGMTString()), 
        document.cookie = a + "=" + b + e + "; path=/";
    }
    function i(a) {
        for (var b, c = document.cookie.split(";"), d = 0, e = c.length, f = a + "="; e > d; d++) {
            for (b = c[d]; " " == b.charAt(0); ) b = b.substring(1, b.length);
            if (0 == b.indexOf(f)) return b.substring(f.length, b.length);
        }
        return null;
    }
    function j() {
        var a = document.styleSheets[0];
        try {
            a.addRule(".xxxxxx", "position: relative"), a.removeRule(a.rules.length - 1);
        } catch (b) {}
    }
    var k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z = {
        id: "grid",
        modifierKey: null,
        showGridKey: "g",
        holdGridKey: "h",
        foregroundKey: "f",
        jumpGridsKey: "j",
        numberOfGrids: 1,
        classPrefix: "grid-",
        cookiePrefix: "hashgrid"
    }, A = 1, B = !1, C = "B", D = -1, E = 9999, F = !1;
    if ("object" == typeof a) for (w in a) z[w] = a[w]; else "string" == typeof a && (z.id = a);
    if ($("#" + z.id).length > 0 && $("#" + z.id).remove(), t = $("<div></div>"), t.attr("id", z.id).css({
        display: "none",
        pointerEvents: "none"
    }), $("body").prepend(t), r = $("#" + z.id), "auto" == r.css("z-index") && r.css("z-index", D), 
    v = parseFloat($(document).height()), r.height(v), r.append('<div id="' + z.id + '-horiz" class="horiz first-line">'), 
    y = r.css("top"), r.css({
        top: "-999px",
        display: "block"
    }), o = $("#" + z.id + "-horiz"), p = o.outerHeight(), r.css({
        display: "none",
        top: y
    }), 0 >= p) return !1;
    for (q = Math.floor(v / p), l = "", n = q - 1; n >= 1; n--) l += '<div class="horiz"></div>';
    for (r.append(l), r.append($('<div class="vert-container"></div>')), u = r.children(".vert-container"), 
    m = r.width(), u.css({
        width: m,
        position: "absolute",
        top: 0
    }), u.append('<div class="vert first-line">&nbsp;</div>'), l = "", n = 0; 30 > n; n++) l += '<div class="vert">&nbsp;</div>';
    return u.append(l), u.children().height(v).css({
        display: "inline-block"
    }), s = i(z.cookiePrefix + z.id), "string" == typeof s ? (x = s.split("-"), x[2] = Number(x[2]), 
    "number" != typeof x[2] || isNaN(x[2]) || (A = x[2].toFixed(0), r.addClass(z.classPrefix + A)), 
    "F" == x[1] && (C = "F", r.css("z-index", E)), "1" == x[0] && (B = !0, F = !0, e())) : r.addClass(z.classPrefix + A), 
    $(document).bind("keydown", f), $(document).bind("keyup", g), k = {}, {};
};

$(document).ready(function() {
    new hashgrid({
        numberOfGrids: 2
    });
});